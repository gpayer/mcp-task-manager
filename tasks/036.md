---
id: 36
parent_id: 33
title: Add relation service methods and blocking logic
status: done
priority: high
type: feature
created_at: "2026-02-13T14:03:33Z"
updated_at: "2026-02-13T14:12:57Z"
---

Add service methods in `internal/task/service.go`: `AddRelation(source, relationType, target)` with validation (both tasks exist, type configured, no self-ref, no duplicates), `RemoveRelation(source, relationType, target)`, `IsBlocked(taskID) (bool, []BlockingInfo)`. Modify `StartTask` to refuse starting blocked tasks. Modify `Delete` to cascade-remove relations referencing deleted task (update other tasks' frontmatter). Modify `CompleteTask` â€” no changes needed since blocking is checked dynamically.