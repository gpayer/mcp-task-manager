---
id: 16
title: Improve get_next_task priority for in-progress parent subtasks
status: done
priority: high
type: feature
created_at: "2026-01-02T21:25:08Z"
updated_at: "2026-01-02T21:40:24Z"
---

Change the `get_next_task` behavior so that subtasks in state `todo` belonging to a parent task in state `in_progress` always have higher priority than top-level tasks in state `todo`.

**Current behavior**: Tasks are sorted by priority level (critical > high > medium > low), then by creation date.

**Desired behavior**: 
1. First, return any `todo` subtasks of `in_progress` parent tasks (sorted by priority, then creation date)
2. Then, return top-level `todo` tasks (sorted by priority, then creation date)

This ensures that once work has started on a parent task, its subtasks are completed before moving to other work.