---
id: 5
title: List command shows empty subtask counts - FormatTaskTable can't compute counts from filtered list
status: in_progress
priority: high
type: bug
created_at: "2025-12-27T21:27:51Z"
updated_at: "2025-12-27T21:27:58Z"
---

## Problem

The `list` command shows a "Subtasks" column but it's always empty for parent tasks.

## Root Cause

`FormatTaskTable` tries to compute subtask counts by iterating through the tasks slice it receives and looking for tasks with `ParentID` set. However, when `cmdList` calls `svc.List()` with `parentID=0` (the default), only top-level tasks are returned - subtasks are filtered out by `Filter()`.

Since the subtasks aren't in the slice, `computeSubtaskCounts()` never finds any and returns an empty map.

## Expected Behavior

Parent tasks in the list should show `[done/total]` subtask counts.

## Solution Options

1. Pass the service/index to FormatTaskTable so it can query subtask counts directly
2. Have cmdList fetch subtask counts separately and pass them to FormatTaskTable
3. Include subtask counts in the Task struct (computed field)