---
id: 39
parent_id: 33
title: Add tests for task relations
status: done
priority: high
type: feature
created_at: "2026-02-13T14:03:41Z"
updated_at: "2026-02-13T14:22:58Z"
---

Add comprehensive tests covering: relation CRUD (add, remove, get), blocking logic (`IsBlocked`, `get_next_task` skipping blocked tasks, `start_task` refusing blocked tasks), delete cascade (relations cleaned up when task deleted), index rebuild (relations correctly rebuilt from frontmatter), symmetric edge generation for `relates_to`, frontmatter serialization (relations field omitted when empty). Add both unit tests and integration tests.